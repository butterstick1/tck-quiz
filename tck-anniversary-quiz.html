<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>What is Your TCK Struggle (& Strength)?</title>
<style>
:root {
  --bg: #fff;
  --card: #dcc7b6;
  --accent: #6e7e6b;
  --muted: #333;
}
body {
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue",
    Arial;
  background: linear-gradient(180deg, #f1f1f1, #fff);
  color: #111;
  padding: 24px;
}
.quiz-wrap {
  max-width: 820px;
  margin: 0 auto;
  background: var(--card);
  border-radius: 12px;
  padding: 20px 22px;
  box-shadow: 0 6px 18px rgba(20, 20, 40, 0.06);
}
header h1 {
  margin: 0 0 6px;
  font-size: 22px;
}
header p {
  margin: 0 0 12px;
  color: var(--muted);
}
.question {
  margin: 18px 0;
  padding: 14px;
  border-radius: 8px;
  background: #f1f1f1;
  border: 1px solid rgba(0, 0, 0, 0.04);
}
.q-head {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 8px;
}
.q-title {
  font-weight: 600;
}
.opts {
  margin-top: 10px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}
.opt {
  display: flex;
  align-items: center;
  gap: 12px;
  background: #fbfbfe;
  padding: 10px;
  border-radius: 8px;
  border: 1px solid rgba(0, 0, 0, 0.03);
  cursor: pointer;
}
.opt input {
  transform: scale(1.1);
}
.controls {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 18px;
}
.btn {
  background: var(--accent);
  color: #fff;
  padding: 10px 14px;
  border-radius: 8px;
  border: 0;
  cursor: pointer;
  font-weight: 600;
}
.btn.redo {
  margin-top: 16px;
}
.btn[disabled] {
  opacity: 0.45;
  cursor: default;
}
.progress {
  flex: 1;
  margin: 0 12px;
}
.progress > div {
  height: 10px;
  background: #e6eefc;
  border-radius: 999px;
  overflow: hidden;
}
.progress > div > i {
  display: block;
  height: 100%;
  width: 0;
  background: var(--accent);
}
.results {
  margin-top: 16px;
}
.category {
  background: #fff;
  padding: 12px;
  border-radius: 8px;
  margin-top: 10px;
  border: 1px solid rgba(0, 0, 0, 0.04);
  font-size: 1.4em;
  line-height: 1.8;
}
.cat-title {
  font-weight: 700;
}
.links-header {
  font-weight: 700;
  font-size: 16px;
  margin-top: 8px;
  color: var(--muted);
}
.links {
  margin-top: 4px;
}
.links a {
  display: inline-block;
  margin: 6px;
  padding: 6px 8px;
  background: #f1f6ff;
  border-radius: 6px;
  text-decoration: none;
  color: var(--accent);
  font-size: 16px;
}
.small {
  font-size: 16px;
  color: var(--muted);
}
.category .small a {
  color: var(--accent);
  text-decoration: underline;
  font-size: 16px;
}
footer {
  margin-top: 14px;
  text-align: center;
  color: var(--muted);
  font-size: 13px;
}
@media (max-width: 520px) {
  .quiz-wrap {
    padding: 16px;
  }
  .opt {
    padding: 12px;
    font-size: 18px;
  }
  .opt input {
    transform: scale(1.3);
  }
}
</style>
</head>
<body>
  <div class="quiz-wrap" id="quiz">
    <header>
      <h1>What is Your TCK Struggle (& Strength)?</h1>
      <div class="small">
        Instructions: For each question, choose the answer that best reflects how you usually feel or respond to common TCK challenges. If none of the answers fit perfectly, pick the one that comes closest — because, let’s be honest, TCKs rarely fit neatly into boxes anyway!<br>
      </div>
    </header>
    <main id="main-content"></main>
    <div class="controls">
      <button class="btn" id="prevBtn" type="button" aria-label="Previous Question">◀ Previous</button>
      <div class="progress" aria-hidden="true" title="Progress: Question 1 of 10">
        <div><i id="progBar"></i></div>
      </div>
      <button class="btn" id="nextBtn" type="button" aria-label="Next Question">Next ▶</button>
    </div>
    <div class="results" id="results" aria-live="polite" style="display:none"></div>
    <footer></footer>
  </div>
<script>
/*********************
 * CONFIGURE QUIZ DATA
 *********************/
const categories = [
  {
    id: 0,
    name: "Superiority: The Burden of Experience",
    message: `Your struggle may be: You sometimes feel like your global experiences set you apart — maybe even above others. You’ve seen more, adapted more, and lived more than most people around you. This can make it frustrating when others don’t "get it." You might unintentionally dismiss their perspectives or feel like you have to prove yourself.
Your strength may be: You have a deep cultural awareness and strong observational skills. You see connections between cultures and ideas that others may not, which makes you a great bridge between different perspectives. If you balance confidence with humility, you can use your insights to foster understanding rather than division.
Your biggest weaknesses can turn into your biggest strengths.`,
    links: [
      {
        title: "How the Monoculture Experience Helped Me See My TCK Arrogance",
        url: "https://tcksforchrist.com/how-the-monoculture-experience-helped-me-see-my-tck-arrogance/"
      },
      {
        title: "Cultural Grace: A Cure to Deadly Patriotism",
        url: "https://tcksforchrist.com/cultural-grace-a-cure-to-deadly-patriotism/"
      },
      {
        title: "3 Reasons We Should Regularly Remind Ourselves of Our Weakness",
        url: "https://tcksforchrist.com/3-reasons-we-should-regularly-remind-ourselves-of-our-weakness/"
      }
    ],
    additionalInfo: {
      text: "Explore all our articles on TCK Arrogance.",
      url: "https://tcksforchrist.com/category/articles/arrogance/"
    },
    thresholdPercent: 35
  },
  {
    id: 1,
    name: "Belonging: The Search for Home",
    message: `Your struggle may be: You’ve lived in multiple places or been a part of different cultures, but you don’t feel like you truly belong anywhere. When you’re in one culture, you miss aspects of another. You might feel like an outsider no matter where you are, possibly even among other TCKs.
Your strength may be: You are highly adaptable and empathetic. You understand what it’s like to be the “new person” and can make others feel welcome. Your ability to connect across cultures means you can create a sense of home wherever you go, even if it doesn’t look the way others expect.
Your biggest weaknesses can turn into your biggest strengths.`,
    links: [
      {
        title: "You Are Not Invisible to God",
        url: "https://tcksforchrist.com/you-are-not-invisible-to-god/"
      },
      {
        title: "Where Are You Rooted?",
        url: "https://tcksforchrist.com/where-are-you-rooted/"
      },
      {
        title: "Tips on How to Embrace the Adventure of Staying",
        url: "https://tcksforchrist.com/tips-on-how-to-embrace-the-adventure-of-staying/"
      }
    ],
    additionalInfo: {
      text: "Explore all our articles on Belonging.",
      url: "https://tcksforchrist.com/category/blog/belonging/"
    },
    thresholdPercent: 35
  },
  {
    id: 2,
    name: "Change: The Weight of Constant Transitions",
    message: `Your struggle may be: You’ve learned how to adapt, but change is exhausting. Every time you start to settle, something shifts — whether it’s moving, losing friends, or adjusting to a new culture. You might feel numb to goodbyes or overwhelmed by the instability. In addition to that, you might have developed a “change mentality” in which you assume something will end soon before you’ve even started. You may also struggle to let go of things that need to change and try to micromanage your surroundings to minimize surprises and increase familiarity.
Your strength may be: You are resilient and open to new experiences. While change is difficult, you’ve developed the ability to adjust quickly and thrive in new environments. You appreciate what you have in the present, especially right before losing something or saying goodbye. This makes you well-suited for careers and lifestyles that require flexibility and problem-solving.
Your biggest weaknesses can turn into your biggest strengths.`,
    links: [
      {
        title: "Changing Our Perspective on Change",
        url: "https://tcksforchrist.com/changing-our-perspective-on-change/"
      },
      {
        title: "Seeing Christ in the Loneliness of Repatriation",
        url: "https://tcksforchrist.com/seeing-christ-in-the-loneliness-of-repatriation/"
      },
      {
        title: "What Fireworks Taught Me About the Temporary",
        url: "https://tcksforchrist.com/what-fireworks-taught-me-about-the-temporary/"
      }
    ],
    additionalInfo: {
      text: "Explore all our articles on Change.",
      url: "https://tcksforchrist.com/category/blog/change/"
    },
    thresholdPercent: 35
  },
  {
    id: 3,
    name: "Grief: The Weight of What You've Left Behind",
    message: `Your struggle may be: You have a lot of good memories, but they’re tinged with loss. Every place you’ve lived and every friend you’ve made is now part of your past. It’s hard to let go, and you might feel nostalgic or even stuck in the past. You want to let go, but you don't know how; you want to grieve, but you feel you can't.
Your strength may be: You have a deep appreciation for meaningful connections and experiences. Because you understand the value of time and people, you don’t take relationships for granted. This makes you an incredibly loyal and thoughtful friend, even if distance separates you from the people you love.
Your biggest weaknesses can turn into your biggest strengths.`,
    links: [
      {
        title: "When You Primarily Expect Hardships From the Hand of God",
        url: "https://tcksforchrist.com/when-you-primarily-expect-hardships-from-the-hand-of-god/"
      },
      {
        title: "Dear TCK, Your Grief Is Valid",
        url: "https://tcksforchrist.com/dear-tck-your-grief-is-valid/"
      },
      {
        title: "Painful Goodbyes Are Beautiful",
        url: "https://tcksforchrist.com/painful-goodbyes-are-beautiful/"
      }
    ],
    additionalInfo: {
      text: "Explore all our articles on Grief.",
      url: "https://tcksforchrist.com/category/blog/grief/"
    },
    thresholdPercent: 35
  },
  {
    id: 4,
    name: "Identity: The Question of Who You Are",
    message: `Your struggle may be: You’ve lived in so many different places or adapted to so many cultures that you’re not sure who the “real” you is. Do you shape-shift to fit in, or do you have a solid core? Sometimes, you feel like a blend of many cultures, and at other times, you feel like you belong to none.
Your strength may be: You are a natural chameleon with a unique worldview. Instead of being tied to a single identity, you embody multiple influences, making you creative, insightful, and able to connect with diverse groups of people. Your perspective is fluid and ever-growing, giving you the freedom to discover and live out the purpose that has been uniquely designed for you.
Your biggest weaknesses can turn into your biggest strengths.`,
    links: [
      {
        title: "Why Your TCK Identity Crisis Is Actually a Good Thing",
        url: "https://tcksforchrist.com/why-your-tck-identity-crisis-is-actually-a-good-thing/"
      },
      {
        title: "Finding Stability While Adapting to People",
        url: "https://tcksforchrist.com/finding-stability-while-adapting-to-people/"
      },
      {
        title: "Find Your Identity Amidst Life’s Shifting Seasons",
        url: "https://tcksforchrist.com/find-your-identity-amidst-lifes-shifting-seasons/"
      }
    ],
    additionalInfo: {
      text: "Explore all our articles on Identity.",
      url: "https://tcksforchrist.com/category/blog/identity/"
    },
    thresholdPercent: 35
  },
  {
    id: 5,
    name: "Relationships: The Challenge of Lasting Connections",
    message: `Your struggle may be: You’ve met a lot of people, but deep, lasting friendships are hard. Either you or the people around you move, and staying in touch is difficult. You might struggle with opening up because you’re used to relationships being temporary. You might also be good at being a friend, but struggle with being on the receiving end of friendship.
Your strength may be: You are a connector who understands the importance of human relationships. Even if friendships are spread across different countries, you have a rare ability to maintain bonds over time. Your experiences have taught you how to form meaningful relationships quickly, and when you find people who truly matter, you cherish them deeply.
Your biggest weaknesses can turn into your biggest strengths.`,
    links: [
      {
        title: "The Clock is Ticking: Struggles in Making Friends as an ATCK",
        url: "https://tcksforchrist.com/2025/07/11/the-clock-is-ticking-struggles-in-making-friends-as-an-atck/"
      },
      {
        title: "Saying Goodbye When I Close Off",
        url: "https://tcksforchrist.com/saying-goodbye-when-i-close-off/"
      },
      {
        title: "Find the Courage to Keep Your Heart Open to Friendship",
        url: "https://tcksforchrist.com/find-the-courage-to-keep-your-heart-open-to-friendship/"
      },
      {
        title: "Let Yourself Be a Burden",
        url: "https://tcksforchrist.com/let-yourself-be-a-burden/"
      }
    ],
    additionalInfo: {
      text: "Explore all our articles on Relationships.",
      url: "https://tcksforchrist.com/category/blog/relationships/"
    },
    thresholdPercent: 35
  }
];
const A = [1, 0, 0, 0, 0, 0],
      B = [0, 1, 0, 0, 0, 0],
      C = [0, 0, 1, 0, 0, 0],
      D = [0, 0, 0, 1, 0, 0],
      E = [0, 0, 0, 0, 1, 0],
      F = [0, 0, 0, 0, 0, 1],
      NONE = Array(categories.length).fill(0);
const questions = [
  {
    text: 'When someone asks, "Where are you from?" how do you respond?',
    options: [
      { text: "I love this question — it’s fun seeing reactions to my complicated history.", weights: A },
      { text: "I give different answers depending on where I’m asked — I don’t have one “true” home.", weights: B },
      { text: "My answer shifts every time I move.", weights: C },
      { text: "I give the shortest answer possible — I’d rather not go into it.", weights: D },
      { text: "I say whatever makes sense in the moment.", weights: E },
      { text: "I usually name the place where my closest people are.", weights: F }
    ]
  },
  {
    text: "What do you struggle with most when meeting new people?",
    options: [
      { text: "Feeling like they can’t relate to me — I’ve seen and experienced so much.", weights: A },
      { text: "Not knowing how to fit in with their culture.", weights: B },
      { text: "Worrying I’ll have to say goodbye soon.", weights: C },
      { text: "Being stuck in friendships I had to leave behind.", weights: D },
      { text: "Not knowing who I really am in new situations.", weights: E },
      { text: "Struggling to make deep, lasting connections.", weights: F }
    ]
  },
  {
    text: "How do you feel about moving frequently?",
    options: [
      { text: "It makes me feel special and cultured.", weights: A },
      { text: "I wish I could stay put somewhere.", weights: B },
      { text: "It’s exhausting, but constant change is my normal.", weights: C },
      { text: "I haven’t really faced all the goodbyes I’ve had to say.", weights: D },
      { text: "Each move uncovers another side of me.", weights: E },
      { text: "It’s hard starting over with friendships every time.", weights: F }
    ]
  },
  {
    text: "What’s your attitude toward cultural differences?",
    options: [
      { text: "I think my perspective is broader than most.", weights: A },
      { text: "I try hard to adapt but never fully fit in.", weights: B },
      { text: "I get used to adjusting quickly.", weights: C },
      { text: "I feel nostalgic for cultures I’ve left behind.", weights: D },
      { text: "Sometimes I feel caught between cultures.", weights: E },
      { text: "I worry I won’t find people who really understand me.", weights: F }
    ]
  },
  {
    text: 'What frustrates you about "home"?',
    options: [
      { text: "Most people haven’t experienced as much as I have.", weights: A },
      { text: "I don’t feel truly at home anywhere.", weights: B },
      { text: "It keeps changing, so I’m not sure where it is.", weights: C },
      { text: "I miss the places and people I’ve lost.", weights: D },
      { text: "I’m not sure if I even have a “real” home.", weights: E },
      { text: "I feel disconnected no matter where I go.", weights: F }
    ]
  },
  {
    text: "How do you handle goodbyes?",
    options: [
      { text: "I keep walls up — goodbyes hurt less if I don’t get close.", weights: A },
      { text: "I hold tight; every goodbye feels like losing a piece of home.", weights: B },
      { text: "It hurts, but change is inevitable.", weights: C },
      { text: "I move on quickly; there’s no time to linger on goodbyes.", weights: D },
      { text: "Each goodbye makes me question where I truly belong.", weights: E },
      { text: "I make the most of the time left, hoping the bond survives.", weights: F }
    ]
  },
  {
    text: "What do you crave most in life?",
    options: [
      { text: "To be admired for what I’ve experienced.", weights: A },
      { text: "A true sense of home.", weights: B },
      { text: "Stability and consistency.", weights: C },
      { text: "To not carry so much loss.", weights: D },
      { text: "A clear sense of who I am.", weights: E },
      { text: "Deep and lasting relationships.", weights: F }
    ]
  },
  {
    text: "How do you feel about making new friends?",
    options: [
      { text: "I like sharing my stories, but people don’t always get it.", weights: A },
      { text: "I always feel like an outsider.", weights: B },
      { text: "I’m used to it, but I don’t always form deep bonds.", weights: C },
      { text: "I hesitate to invest — I’m still holding onto old friends.", weights: D },
      { text: "I adapt to fit in, but I don’t know if it’s the real me.", weights: E },
      { text: "I hold back, afraid of losing them again.", weights: F }
    ]
  },
  {
    text: "How do you see your past experiences?",
    options: [
      { text: "They make me unique and knowledgeable.", weights: A },
      { text: "They make it hard to feel at home anywhere.", weights: B },
      { text: "They’re filled with constant change.", weights: C },
      { text: "They remind me of all I’ve lost.", weights: D },
      { text: "They shaped me, but I’m still figuring out who I am.", weights: E },
      { text: "They made me who I am, but I wish I had more lasting connections.", weights: F }
    ]
  },
  {
    text: "If you could change one thing about your TCK experience, what would it be?",
    options: [
      { text: "That people truly understand my experiences and worldview.", weights: A },
      { text: "That I had one place where I really belonged.", weights: B },
      { text: "That I didn’t have to say goodbye so often.", weights: C },
      { text: "That I didn’t have to keep losing people and places I love.", weights: D },
      { text: "That I could finally figure out who I really am.", weights: E },
      { text: "That I had deeper, lasting friendships.", weights: F }
    ]
  }
];
questions.forEach(q => q.options.push({ text: "I don't relate to any of these.", weights: NONE }));
/*********************
 * QUIZ LOGIC
 *********************/
document.addEventListener("DOMContentLoaded", () => {
  const state = { cur: 0, answers: Array(questions.length).fill(null) };
  const main = document.getElementById("main-content");
  const prevBtn = document.getElementById("prevBtn");
  const nextBtn = document.getElementById("nextBtn");
  const progBar = document.getElementById("progBar");
  const resultsEl = document.getElementById("results");

  // Fisher-Yates shuffle algorithm to randomize options
  function shuffle(array) {
    const newArray = [...array];
    for (let i = newArray.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
    }
    return newArray;
  }

  function renderQuestion(index) {
    const q = questions[index];
    main.innerHTML = "";
    const container = document.createElement("div");
    container.className = "question";
    container.setAttribute("aria-current", "step");
    const head = document.createElement("div");
    head.className = "q-head";
    const title = document.createElement("div");
    title.className = "q-title";
    title.textContent = `Question ${index + 1} of ${questions.length}: ${q.text}`;
    head.appendChild(title);
    container.appendChild(head);
    const opts = document.createElement("div");
    opts.className = "opts";
    // Separate "I don't relate" option and shuffle the rest
    const noneOption = q.options[q.options.length - 1]; // Last option is "I don't relate"
    const otherOptions = q.options.slice(0, -1); // All other options
    const shuffledOptions = shuffle(otherOptions.map((opt, i) => ({ opt, originalIndex: i })));
    // Render shuffled options
    shuffledOptions.forEach(({ opt, originalIndex }, i) => {
      const label = document.createElement("label");
      label.className = "opt";
      label.tabIndex = 0;
      label.dataset.index = originalIndex;
      const input = document.createElement("input");
      input.type = "radio";
      input.name = "q" + index;
      input.value = originalIndex;
      input.setAttribute("aria-label", `${opt.text}`);
      if (state.answers[index] === originalIndex) input.checked = true;
      const txt = document.createElement("div");
      txt.innerHTML = `<strong>${String.fromCharCode(65 + i)}.</strong> ${opt.text}`;
      label.appendChild(input);
      label.appendChild(txt);
      opts.appendChild(label);
    });
    // Append "I don't relate" option at the end
    const noneLabel = document.createElement("label");
    noneLabel.className = "opt";
    noneLabel.tabIndex = 0;
    noneLabel.dataset.index = q.options.length - 1; // Original index of "I don't relate"
    const noneInput = document.createElement("input");
    noneInput.type = "radio";
    noneInput.name = "q" + index;
    noneInput.value = q.options.length - 1;
    noneInput.setAttribute("aria-label", `${noneOption.text}`);
    if (state.answers[index] === q.options.length - 1) noneInput.checked = true;
    const noneTxt = document.createElement("div");
    noneTxt.innerHTML = `<strong>${String.fromCharCode(65 + shuffledOptions.length)}.</strong> ${noneOption.text}`;
    noneLabel.appendChild(noneInput);
    noneLabel.appendChild(noneTxt);
    opts.appendChild(noneLabel);
    opts.addEventListener("click", (e) => {
      const label = e.target.closest(".opt");
      if (label) {
        const input = label.querySelector("input");
        input.checked = true;
        state.answers[index] = parseInt(label.dataset.index);
        updateButtons();
      }
    });
    container.appendChild(opts);
    main.appendChild(container);
    updateProgress();
    updateButtons();
    const firstInput = container.querySelector("input[type='radio']");
    if (firstInput) firstInput.focus();
  }

  function updateProgress() {
    const pct = Math.round((state.cur / questions.length) * 100);
    progBar.style.width = pct + "%";
    progBar.parentElement.setAttribute("title", `Progress: Question ${state.cur + 1} of ${questions.length}`);
  }

  function updateButtons() {
    prevBtn.disabled = state.cur === 0;
    nextBtn.textContent = state.cur === questions.length - 1 ? "See Results ▶" : "Next ▶";
    const answered = state.answers[state.cur] !== null;
    nextBtn.disabled = !answered;
  }

  prevBtn.addEventListener("click", () => {
    if (state.cur > 0) {
      state.cur--;
      renderQuestion(state.cur);
    }
  });

  nextBtn.addEventListener("click", () => {
    if (state.cur < questions.length - 1) {
      state.cur++;
      renderQuestion(state.cur);
    } else {
      showResults();
    }
  });

  function calculateScores() {
    const scores = Array(categories.length).fill(0);
    questions.forEach((q, qi) => {
      const ansIndex = state.answers[qi];
      if (ansIndex == null) return;
      const opt = q.options[ansIndex];
      opt.weights.forEach((w, cid) => {
        scores[cid] += w || 0;
      });
    });
    return scores;
  }

  function calculateMaxScores() {
    const totalMax = Array(categories.length).fill(0);
    questions.forEach((q) => {
      const perCatMax = Array(categories.length).fill(0);
      q.options.forEach((o) =>
        o.weights.forEach((w, cid) => (perCatMax[cid] = Math.max(perCatMax[cid] || 0, w)))
      );
      perCatMax.forEach((v, cid) => (totalMax[cid] += v));
    });
    return totalMax;
  }

  function renderCategoryResult(cat, percent, isBestMatch = false) {
    const wrap = document.createElement("div");
    wrap.className = "category";
    const t = document.createElement("div");
    t.className = "cat-title";
    t.textContent = isBestMatch ? `${cat.name} — best match (${percent}%)` : `${cat.name} — ${percent}% match`;
    const p = document.createElement("div");
    p.className = "small";
    p.style.whiteSpace = "pre-line";
    p.textContent = cat.message;
    const linksHeader = document.createElement("div");
    linksHeader.className = "links-header";
    linksHeader.textContent = "Recommended Articles:";
    const links = document.createElement("div");
    links.className = "links";
    (cat.links || []).forEach((u) => {
      const a = document.createElement("a");
      a.href = u.url;
      a.target = "_blank";
      a.rel = "noopener";
      a.textContent = u.title;
      links.appendChild(a);
    });
    const additional = document.createElement("div");
    additional.className = "small";
    additional.style.marginTop = "8px";
    if (cat.additionalInfo) {
      additional.innerHTML = `For further reading: "<a href="${cat.additionalInfo.url}" target="_blank" rel="noopener">${cat.additionalInfo.text}</a>"`;
    } else {
      additional.textContent = "No additional resources available.";
    }
    wrap.appendChild(t);
    wrap.appendChild(p);
    wrap.appendChild(linksHeader);
    wrap.appendChild(links);
    wrap.appendChild(additional);
    return wrap;
  }

  function showResults() {
    const scores = calculateScores();
    const totalMax = calculateMaxScores();
    if (scores.every((s) => s === 0)) {
      resultsEl.innerHTML = `
        <h2>Your Results</h2>
        <p>You didn’t relate to any of the scenarios. That’s totally fine! 
        This quiz is just one way of exploring patterns, and not everyone fits into these categories.</p>
      `;
      return;
    }
    main.innerHTML = "";
    resultsEl.style.display = "block";
    resultsEl.innerHTML = "<h2>Results</h2>";
    let matchedCategories = 0;
    categories.forEach((cat) => {
      const cid = cat.id;
      const got = scores[cid] || 0;
      const max = totalMax[cid] || 0;
      const percent = max > 0 ? Math.round((got / max) * 100) : 0;
      if (percent >= (cat.thresholdPercent || 30)) {
        resultsEl.appendChild(renderCategoryResult(cat, percent));
        matchedCategories++;
      }
    });
    if (matchedCategories === 0) {
      let bestCid = 0;
      let bestPct = -1;
      categories.forEach((cat) => {
        const cid = cat.id;
        const got = scores[cid] || 0;
        const max = totalMax[cid] || 0;
        const percent = max > 0 ? Math.round((got / max) * 100) : 0;
        if (percent > bestPct) {
          bestPct = percent;
          bestCid = cid;
        }
      });
      const cat = categories[bestCid];
      resultsEl.appendChild(renderCategoryResult(cat, bestPct, true));
    }
    document.querySelector(".controls").style.display = "none";
    const redoBtn = document.createElement("button");
    redoBtn.textContent = "Redo Quiz";
    redoBtn.className = "btn redo";
    redoBtn.onclick = () => {
      state.cur = 0;
      state.answers = Array(questions.length).fill(null);
      resultsEl.style.display = "none";
      document.querySelector(".controls").style.display = "flex";
      window.scrollTo({ top: 0, behavior: "smooth" });
      renderQuestion(state.cur);
    };
    resultsEl.appendChild(redoBtn);
  }

  renderQuestion(0);
});
</script>
</body>
</html>
